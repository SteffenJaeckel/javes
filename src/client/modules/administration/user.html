<template name="user">
  <style>
    tr.employiesrow td {
      background-color: inherit;
    }

    button.tagbutton {
      max-width:64px;
      overflow:hidden;
      text-overflow: ellipsis;
      margin-bottom: 4px;
    }

    input.filter-head {
      width:100%;
    }

  </style>
  <div style="padding: 10px;background-color: #eee;height: 50px;">
    {{#if checkPermission "administration.addUser"}}
      <button id="add-user" class="btn btn-sm btn-success">Neuen Benutzer anlegen ...</button>
    {{/if}}
  </div>
  <div style="position:absolute;left:0%;right:0%;top:50px;bottom:0%;overflow-y:auto;border:1px solid #ccc;">
    <table width="100%" class="table">
      <thead>
        <tr>
          <td><b>Benutzer</b></td>
          <td><b>E-Mail</b></td>
          <td><b>Erstellt am</b></td>
          <td><b>Rollen</b></td>
          <td><b>Gruppen</b></td>
        </tr>
        <tr>
          <td><input id="filter-user" class="form-control filter-head input-sm" type="text"/></td>
          <td><input id="filter-email" class="form-control filter-head input-sm" type="text"/></td>
          <td><input id="filter-created" class="form-control filter-head input-sm" type="text"/></td>
          <td><input id="filter-roles" class="form-control filter-head input-sm" type="text"/></td>
          <td><input id="filter-groups" class="form-control filter-head input-sm" type="text"/></td>
        </tr>
      </thead>
      <tbody style="overflow:scroll">
        {{#each employies}}
          <tr data="{{this._id}}" class="employiesrow huntertype-{{typeof this}}">
            <td>
              {{this.profile.surname}}, {{this.profile.firstname}}
            </td>
            <td>
              {{#each this.emails }}
                {{this.address}}
              {{/each}}
            </td>
            <td>
              {{formatDate this.createdAt}}
            </td>
            <td>
              {{#each rolesof this}}
                <button class="btn btn-primary btn-xs tagbutton roletag">{{this}}</button>&nbsp;
              {{/each}}
            </td>
            <td>
              {{#each groupsof this}}
                <button class="btn btn-primary btn-xs tagbutton grouptag">{{this}}</button>&nbsp;
              {{/each}}
            </td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
</template>
